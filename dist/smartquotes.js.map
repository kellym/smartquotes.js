{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap ce7626458810069a67c3","webpack:///./lib/string.js","webpack:///./lib/replacements.js","webpack:///./lib/element.js","webpack:///./lib/index.js","webpack:///./lib/listen.js"],"names":[],"mappings":"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","file":"smartquotes.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"smartquotes\"] = factory();\n\telse\n\t\troot[\"smartquotes\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ce7626458810069a67c3","const replacements = require('./replacements');\n\nmodule.exports = function(str, options) {\n  options = options || {};\n  replacements.forEach( replace => {\n    const replacement = typeof replace[1] === 'function' ? replace[1](options.retainLength) : replace[1];\n    str = str.replace(replace[0], replacement);\n  });\n  return str;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/string.js","module.exports = [\n  // triple prime\n  [/'''/g, retainLength => '\\u2034' + (retainLength ? '\\u2063\\u2063' : '')],\n  // beginning \"\n  [/(\\W|^)\"(\\w)/g, '$1\\u201c$2'],\n  // ending \"\n  [/(\\u201c[^\"]*)\"([^\"]*$|[^\\u201c\"]*\\u201c)/g, '$1\\u201d$2'],\n  // remaining \" at end of word\n  [/([^0-9])\"/g, '$1\\u201d'],\n  // double prime as two single quotes\n  [/''/g, retainLength => '\\u2033' + (retainLength ? '\\u2063' : '')],\n  // beginning '\n  [/(\\W|^)'(\\S)/g, '$1\\u2018$2'],\n  // conjunction's possession\n  [/([a-z0-9])'([a-z])/ig, '$1\\u2019$2'],\n  // abbrev. years like '93\n  [/(\\u2018)([0-9]{2}[^\\u2019]*)(\\u2018([^0-9]|$)|$|\\u2019[a-z])/ig, '\\u2019$2$3'],\n  // ending '\n  [/((\\u2018[^']*)|[a-z])'([^0-9]|$)/ig, '$1\\u2019$3'],\n  // backwards apostrophe\n  [/(\\B|^)\\u2018(?=([^\\u2018\\u2019]*\\u2019\\b)*([^\\u2018\\u2019]*\\B\\W[\\u2018\\u2019]\\b|[^\\u2018\\u2019]*$))/ig, '$1\\u2019'],\n  // double prime\n  [/\"/g, '\\u2033'],\n  // prime\n  [/'/g, '\\u2032']\n];\n\n\n\n// WEBPACK FOOTER //\n// ./lib/replacements.js","const string = require('./string');\n\nconst TEXT_NODE = typeof Element !== 'undefined' && Element.TEXT_NODE || 3;\n\nmodule.exports = function(root, ignoreClassNames) {\n  handleElement(root, ignoreClassNames);\n  return root;\n};\n\nconst SMARTQUOTES_IGNORED_FLAG = \"smartquotes-js-ignore-element-flag\"\n\n// Get the intersection of two lists in O(a+b)\nconst getIntersect = (a, b) => {\n  return a.filter(Set.prototype.has, new Set(b));\n}\n\nconst getElementClassNames = (element) => {\n  return (element && element.classList && element.classList.length > 0) ? [...element.classList] : [];\n}\n\nconst getHasIgnoredFlag = (element) => {\n  return element && element[SMARTQUOTES_IGNORED_FLAG] === true\n}\n\nconst getIsIgnored = (element, ignoreClassNames) => {\n  const elementClassNames = getElementClassNames(element);\n\n  // If this node or its parent have the flag, it should be ignored\n  if (getHasIgnoredFlag(element) || getHasIgnoredFlag(element.parentElement)) {\n    return true;\n  }\n\n  // Find intersection of the classNames lists. If >0, then an ignored class\n  // is on the element\n  const intersection = getIntersect(elementClassNames, ignoreClassNames);\n  return intersection.length > 0;\n}\n\nconst markIgnored = (element) => {\n  element[SMARTQUOTES_IGNORED_FLAG] = true\n  const childNodes = element.childNodes;\n  for (let i = 0; i < childNodes.length; i++) {\n    const node = childNodes[i];\n    // recursively ignore all descendants, but disregard if they've already been visited\n    if (!getHasIgnoredFlag(node)) {\n      markIgnored(node);\n    }\n  }\n}\n\nfunction handleElement(el, ignoreClassNames=[]) {\n\n  if (getIsIgnored(el, ignoreClassNames)) {\n    markIgnored(el);\n    return;\n  }\n\n  if (['CODE', 'PRE', 'SCRIPT', 'STYLE', 'NOSCRIPT'].indexOf(el.nodeName.toUpperCase()) !== -1) {\n    return;\n  }\n\n  let i, node, nodeInfo;\n  let text = '';\n  const childNodes = el.childNodes;\n  const textNodes = [];\n\n  // compile all text first so we handle working around child nodes\n  for (i = 0; i < childNodes.length; i++) {\n    node = childNodes[i];\n    if (node.nodeType === TEXT_NODE || node.nodeName === '#text') {\n      textNodes.push([node, text.length]);\n      text += node.nodeValue || node.value;\n    } else if (node.childNodes && node.childNodes.length) {\n      text += handleElement(node, ignoreClassNames);\n    }\n  }\n  text = string(text, { retainLength: true });\n  for (i in textNodes) {\n    nodeInfo = textNodes[i];\n    if (nodeInfo[0].nodeValue) {\n      nodeInfo[0].nodeValue = substring(text, nodeInfo[0].nodeValue, nodeInfo[1]);\n    } else if (nodeInfo[0].value) {\n      nodeInfo[0].value = substring(text, nodeInfo[0].value, nodeInfo[1]);\n    }\n  }\n  return text;\n}\n\nfunction substring(text, value, position) {\n  return text.substr(position, value.length).replace('\\u2063', '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/element.js","const replacements = require('./replacements'),\n      element      = require('./element'),\n      listen       = require('./listen'),\n      string       = require('./string');\n\n\n// The smartquotes function should just delegate to the other functions\nfunction smartquotes(context, ignoreClassNames=[]) {\n  if (typeof document !== 'undefined' && typeof context !== 'string' && !context) {\n    listen.runOnReady(() => element(document.body, ignoreClassNames));\n    return smartquotes;\n  } else if (typeof context === 'string') {\n    return string(context);\n  } else {\n    return element(context, ignoreClassNames);\n  }\n}\n\n\nmodule.exports = smartquotes;\nmodule.exports.string = string;\nmodule.exports.element = element;\nmodule.exports.replacements = replacements;\nmodule.exports.listen = listen;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","const element = require('./element'),\n      string  = require('./string');\n\nfunction listen(root, ignoreClassNames=[]) {\n  const observer = new MutationObserver( mutations => {\n    mutations.forEach( mutation => {\n      for(let node of mutation.addedNodes) {\n        element(node, ignoreClassNames);\n      }\n    });\n  });\n  listen.runOnReady( () => {\n    observer.observe(root || document.body, {\n      childList: true,\n      subtree: true\n    });\n  });\n  return observer;\n}\n\nlisten.runOnReady = function(run) {\n  // if called without arguments, run on the entire body after the document has loaded\n  if (document.readyState !== 'loading') {\n    // we're already ready\n    run();\n  } else if (document.addEventListener) {\n    document.addEventListener('DOMContentLoaded', run, false);\n  } else {\n    const readyStateCheckInterval = setInterval(() => {\n      if (document.readyState !== 'loading') {\n        clearInterval(readyStateCheckInterval);\n        run();\n      }\n    }, 10);\n  }\n};\n\nmodule.exports = listen;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/listen.js"],"sourceRoot":""}